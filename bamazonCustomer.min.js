function purchase(e,n){inquirer.prompt([{name:"id",type:"input",message:"Which item would you like to buy? Please enter the ID.",validate:function(n){if(""===n.trim())return!1;if(isNaN(n)===!0)return!1;var t=parseInt(n);return e.includes(t)}},{name:"quantity",type:"input",message:"How many would you like to buy?",validate:function(e){return""===e.trim()?!1:isNaN(e)===!1}}]).then(function(e){connection.query('SELECT stock_quantity AS "Quantity", FORMAT(price,2) AS "Price" FROM products WHERE ?',{item_id:e.id},function(n,t,o){if(n)throw n;console.log("");var r=parseInt(t[0].Quantity),i=parseFloat(t[0].Price),a=parseInt(e.quantity);a>r?(console.log("Insufficient Quantity!"),connection.end()):fulfillOrder(e.id,a,r,i)})})}function fulfillOrder(e,n,t,o){connection.query("UPDATE products SET ? WHERE ?",[{stock_quantity:t-n},{item_id:e}],function(e,t,r){if(e)throw e;if("OkPacket"!==t.constructor.name)throw"Unable to update quantity!";console.log("Your total is: $"+(n*o).toFixed(2)),console.log("Thank you for your purchase!")}),connection.end()}var mysql=require("mysql"),inquirer=require("inquirer"),consoleTable=require("console.table"),connection=mysql.createConnection({host:"localhost",port:3306,user:"root",password:"root",database:"bamazonDB"});connection.connect(),connection.query('SELECT item_id AS "Item ID", product_name AS "Item Name",  CONCAT("$", FORMAT(price,2)) AS "Price" FROM products',function(e,n,t){if(e)throw e;console.log(""),console.table(n);var o=n.map(function(e){return e["Item ID"]});console.log(""),purchase(o)});